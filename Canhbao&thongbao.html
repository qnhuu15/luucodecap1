<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SmartExpense — Cài đặt</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
<style>
  :root{ --bg:#eaf3f9; --card:#fff; --text:#0f172a; --muted:#64748b;
    --border:#e5e7eb; --blue:#2563eb; --radius:14px; --shadow:0 10px 26px rgba(15,23,42,.06); }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{ margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    display:grid;grid-template-columns:260px 1fr;min-height:100vh;}


  .sidebar{background:#fff;border-right:1px solid var(--border);padding:18px 14px}
  .brand{display:flex;align-items:center;gap:12px;margin-bottom:10px}
  .brand .logo{width:40px;height:40px;border-radius:10px;overflow:hidden;background:#ffe8e0;display:grid;place-items:center;box-shadow:var(--shadow)}
  .brand .logo img{width:100%;height:100%;object-fit:cover}
  .brand b{font-size:18px}
  .nav{display:flex;flex-direction:column;gap:6px}
  .nav a{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:10px;color:#111827;font-weight:700;text-decoration:none}
  .nav a .i{width:18px;text-align:center}
  .nav a.active{background:var(--blue);color:#fff}

  .main{padding:22px 24px 40px}
  .alert-outer{background:#eaf5ff;border:1px solid #cfe4ff;border-radius:18px;padding:18px}
  .alert-title{font-size:28px;font-weight:800;margin:2px 0 14px}
  .alert-shell{display:grid;grid-template-columns:1fr 360px;gap:0;background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);overflow:hidden}
  .alert-left{padding:16px}
  .tabs{display:flex;gap:24px;font-weight:800;align-items:center}
  .tabs a{color:#0f172a;text-decoration:none;padding:8px 0;position:relative}
  .tabs a.active{color:#111827}
  .tabs a.active::after{content:"";position:absolute;left:0;right:0;bottom:-10px;height:3px;border-radius:3px;background:#111827}
  .divider{height:2px;background:#e5e7eb;margin-top:10px}
  .tools{display:flex;gap:10px;align-items:center;margin:12px 0}
  .btn-outline{height:38px;border:1px solid var(--border);background:#fff;border-radius:10px;padding:0 14px;font-weight:700;cursor:pointer}
  .search{margin-left:auto}
  .search input{width:260px;height:38px;border:1px solid var(--border);border-radius:999px;padding:0 12px;background:#f8fafc;outline:none}
  .list{margin-top:8px}
  .item{display:grid;grid-template-columns:110px 1fr 120px;gap:12px;align-items:center;border:1.5px solid #e6ebf2;background:#fff;border-radius:14px;padding:12px 14px}
  .item + .item{margin-top:12px}
  .badge{display:inline-grid;place-items:center;width:90px;height:36px;border-radius:10px;font-weight:800}
  .badge.red{background:#fee2e2;border:1px solid #fecaca;color:#b91c1c}
  .badge.yellow{background:#fef3c7;border:1px solid #fde68a;color:#92400e}
  .item .t{font-weight:800}
  .item .sub{color:#6b7280;margin-top:2px}
  .item .time{color:#6b7280;text-align:right}
  .item.active{background:linear-gradient(0deg,rgba(17,24,39,.05),rgba(17,24,39,.05)),#fff;border-color:#9aa5b1}
  .empty{color:#94a3b8;font-size:14px;margin-top:10px}

  .right{border-left:2px solid #e5e7eb;background:#fff;padding:18px}
  .right h3{margin:0 0 18px;font-size:22px;font-weight:800}
  .right .sub{margin:0 0 8px;font-weight:800}
  .right .desc{color:#6b7280;margin:0 0 16px}
  .actions{display:flex;gap:12px;flex-wrap:wrap}
  .btn-primary{height:40px;border:0;border-radius:10px;background:#2563eb;color:#fff;font-weight:800;padding:0 14px;cursor:pointer}
  .btn-ghost{height:40px;border:1px solid var(--border);border-radius:10px;background:#fff;font-weight:800;padding:0 14px;cursor:pointer}
  .progress{height:12px;background:#eef2f7;border:1px solid #dbe1ea;border-radius:999px;overflow:hidden;width:100%;max-width:420px;margin-bottom:12px}
  .progress > i{display:block;height:100%;background:#2563eb;width:0%}

  .pig-float{position:fixed;right:26px;bottom:26px;width:76px;height:76px;border-radius:18px;background:#ffe8e0;display:grid;place-items:center;box-shadow:var(--shadow);z-index:30;border:0;cursor:pointer}
  .pig-float img{width:64px;height:64px}
  .chatbox{position:fixed;right:26px;bottom:112px;width:340px;background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);overflow:hidden;display:none;z-index:40;grid-template-rows:56px 1fr 60px}
  .chatbox.open{display:grid}
  .chat-head{background:#1da1c9;color:#fff;display:flex;align-items:center;gap:10px;padding:10px 12px;font-weight:800}
  .chat-head img{width:28px;height:28px;border-radius:6px;background:#ffe8e0}
  .chat-title{line-height:1.2}
  .chat-sub{font-weight:600;opacity:.95}
  .chat-body{background:#f4fbff;overflow:auto;padding:10px;max-height:380px}
  .msg{display:flex;align-items:flex-end;margin:8px 0;gap:8px}
  .bubble{max-width:78%;padding:10px 12px;border-radius:14px;border:1px solid var(--border);background:#fff;font-size:14px}
  .msg.user{justify-content:flex-end}
  .msg.user .bubble{background:#2563eb;border:none;color:#fff}
  .avatar-s{width:26px;height:26px;border-radius:50%;display:grid;place-items:center;background:#ffe8e0;flex:0 0 26px;font-size:14px}
  .chat-input{background:#fff;border-top:1px solid var(--border);display:flex;align-items:center;gap:8px;padding:8px}
  #chatInput{flex:1;height:40px;border:1px solid var(--border);border-radius:999px;padding:0 12px;outline:none}
  #sendBtn{width:38px;height:38px;border-radius:999px;border:0;background:#2563eb;color:#fff;display:grid;place-items:center;cursor:pointer}
</style>
</head>
<body>

  <aside class="sidebar">
    <div class="brand">
      <div class="logo"><img src="https://play-lh.googleusercontent.com/oIYzM27-Lax7Zkg4grAxxLYRQkxHrs1osx0Qbf-jADQNpv9400yo0qYcLzDn-Qz2M8A=w480-h960-rw" alt=""></div>
      <b>SmartExpense</b>
    </div>
    <nav class="nav">
      <a href="trangchu.html"><span class="i">🏠</span> Tổng quan</a>
      <a href="danhsachchitieu.html"><span class="i">🧾</span> Danh sách chi tiêu</a>
      <a href="lichsuchitieu.html"><span class="i">🕘</span> Lịch sử chi tiêu</a>
      <a href="#"><span class="i">📅</span> Lên lịch chi tiêu</a>
      <a href="loaichitieu.html"><span class="i">🏷️</span> Loại chi tiêu</a>
      <a href="baocao.html"><span class="i">📊</span> Báo cáo</a>
      <a href="hoso.html"><span class="i">👤</span> Hồ sơ</a>
      <a href="caidat.html" class="active"><span class="i">⚙️</span> Cài đặt</a>
      <a href="login.html"><span class="i">↪️</span> Đăng xuất</a>
    </nav>
  </aside>

  <main class="main">
    <div class="alert-outer">
      <div class="alert-title">Cảnh báo & Thông báo</div>
      <div class="alert-shell">

        <section class="alert-left">
          <div class="tabs" id="tabs">
            <a href="#" class="active" data-tab="all">Tất cả</a>
            <a href="#" data-tab="budget">Ngân sách</a>
            <a href="#" data-tab="anomaly">Bất thường</a>
          </div>
          <div class="divider"></div>
          <div class="tools">
            <button class="btn-outline" id="btnDelete">Xoá</button>
            <div class="search"><input id="q" placeholder="Tìm kiếm"></div>
          </div>
          <div class="list" id="list"></div>
          <div class="empty" id="empty" style="display:none">Không có thông báo</div>
        </section>

        <aside class="right" id="detail">
          <h3>Chi tiết thông báo</h3>
          <div class="sub" id="d-title"></div>
          <p class="desc" id="d-desc"></p>
          <div class="progress" id="progress" style="display:none"><i></i></div>
          <div class="sub">Đề xuất hành động</div>
          <div class="actions">
            <button class="btn-primary" id="act1"></button>
            <button class="btn-ghost" id="act2"></button>
          </div>
          <p class="desc" id="d-tip" style="margin-top:14px"></p>
        </aside>
      </div>
    </div>
  </main>

  <div id="chatbox" class="chatbox" aria-hidden="true">
    <div class="chat-head">
      <img src="https://play-lh.googleusercontent.com/oIYzM27-Lax7Zkg4grAxxLYRQkxHrs1osx0Qbf-jADQNpv9400yo0qYcLzDn-Qz2M8A=w480-h960-rw" alt="">
      <div>
        <div class="chat-title">Trợ lý thông minh</div>
        <div class="chat-sub">Xin chào! 👋 Rất vui khi được hỗ trợ bạn</div>
      </div>
    </div>
    <div id="chatBody" class="chat-body"></div>
    <div class="chat-input">
      <input id="chatInput" type="text" placeholder="Viết tin nhắn…">
      <button id="sendBtn" title="Gửi">➤</button>
    </div>
  </div>
  <button id="chatToggle" class="pig-float" aria-label="Mở trợ lý">
    <img src="https://play-lh.googleusercontent.com/oIYzM27-Lax7Zkg4grAxxLYRQkxHrs1osx0Qbf-jADQNpv9400yo0qYcLzDn-Qz2M8A=w480-h960-rw" alt="">
  </button>

<script>
const ALERTS = [
  { id:'b1', type:'budget', kind:'Thông báo', badge:'red', title:'Gần chạm ngưỡng', desc:'Danh mục ăn uống đã sử dụng 55% ngân sách tháng.', time:'2 giờ trước', tip:'Cắt giảm các chi phí không cần thiết', progress:55 },
  { id:'b2', type:'budget', kind:'Cảnh báo',  badge:'red', title:'Nguy cơ vượt ngân sách', desc:'Dự báo chi tiêu danh mục Di chuyển sẽ vượt 12% vào 15/10.', time:'Hôm nay, 08:15', tip:'Xem lại kế hoạch chi tiêu', progress:72 },
  { id:'b3', type:'budget', kind:'Cảnh báo',  badge:'red', title:'Ngân sách vượt quá', desc:'Danh mục Giải trí đã vượt quá 150,000đ so với ngân sách.', time:'2 ngày trước', tip:'Điều chỉnh ngân sách phù hợp', progress:100 },
  { id:'a1', type:'anomaly', kind:'Thông báo', badge:'red', title:'Bất thường', desc:'Phát hiện bất thường', time:'2 giờ trước', tip:'Hãy kiểm tra.' },
  { id:'a2', type:'anomaly', kind:'Cảnh báo',  badge:'yellow', title:'Giao dịch bất thường phát hiện', desc:'Một giao dịch bất thường đã được phát hiện.', time:'Hôm nay, 08:15', tip:'Kiểm tra lại nguồn giao dịch' },
  { id:'a3', type:'anomaly', kind:'Cảnh báo',  badge:'yellow', title:'Tài khoản khả nghi', desc:'Có một đăng nhập bất thường vào tài khoản của bạn', time:'2 ngày trước', tip:'Đổi mật khẩu và bật 2FA' }
];

const tabs=document.getElementById('tabs');
const list=document.getElementById('list');
const empty=document.getElementById('empty');
const q=document.getElementById('q');
const dTitle=document.getElementById('d-title');
const dDesc=document.getElementById('d-desc');
const dTip=document.getElementById('d-tip');
const act1=document.getElementById('act1');
const act2=document.getElementById('act2');
const progressWrap=document.getElementById('progress');
const progressBar=progressWrap.querySelector('i');

let currentTab='all', current=null;

function itemsForTab(){
  const term=(q.value||'').toLowerCase();
  return ALERTS.filter(a=>(currentTab==='all'||a.type===currentTab) &&
    (a.title.toLowerCase().includes(term)||a.desc.toLowerCase().includes(term)));
}

function render(){
  const rows=itemsForTab();
  list.innerHTML='';
  rows.forEach(a=>{
    const el=document.createElement('div');
    el.className='item'+(current&&current.id===a.id?' active':'');
    el.dataset.id=a.id;
    el.innerHTML=`
      <div class="badge ${a.badge}">${a.kind}</div>
      <div><div class="t">${a.title}</div><div class="sub">${a.desc}</div></div>
      <div class="time">${a.time}</div>`;
    list.appendChild(el);
  });
  empty.style.display=rows.length?'none':'block';
  if(rows.length && (!current || (currentTab!=='all' && current.type!==currentTab))) select(rows[0].id);
}

function select(id){
  current=ALERTS.find(a=>a.id==id);
  [...list.children].forEach(x=>x.classList.toggle('active',x.dataset.id===id));
  dTitle.textContent=current.title;
  dDesc.textContent=current.desc;
  dTip.textContent=current.tip||'';

  if(current.type==='budget'){
    act1.textContent='Điều chỉnh ngân sách'; act1.style.display='';
    act2.textContent='Xem xu hướng chi tiêu'; act2.style.display='';
    progressWrap.style.display=''; progressBar.style.width=(current.progress||0)+'%';
  }else{
    act1.textContent='Kiểm tra giao dịch'; act1.style.display='';
    act2.style.display='none';
    progressWrap.style.display='none';
  }
}

tabs.addEventListener('click',e=>{
  const a=e.target.closest('a[data-tab]'); if(!a) return;
  e.preventDefault();
  [...tabs.children].forEach(t=>t.classList.remove('active'));
  a.classList.add('active'); currentTab=a.dataset.tab; current=null; render();
});
list.addEventListener('click',e=>{const it=e.target.closest('.item'); if(it) select(it.dataset.id);});
q.addEventListener('input',render);
document.getElementById('btnDelete').onclick=()=>{if(!current) return alert('Chưa chọn thông báo nào'); const i=ALERTS.findIndex(a=>a.id===current.id); ALERTS.splice(i,1); current=null; render();};

const chatToggle=document.getElementById('chatToggle');
const chatbox=document.getElementById('chatbox');
const chatBody=document.getElementById('chatBody');
const chatInput=document.getElementById('chatInput');
const sendBtn=document.getElementById('sendBtn');

function addMsg(text,who='bot'){
  const wrap=document.createElement('div'); wrap.className='msg '+who;
  const av=document.createElement('div'); av.className='avatar-s'; av.textContent=who==='bot'?'🐷':'👤';
  const b=document.createElement('div'); b.className='bubble'; b.textContent=text;
  if(who==='bot'){wrap.append(av,b);}else{wrap.append(b,av);}
  chatBody.appendChild(wrap); chatBody.scrollTop=chatBody.scrollHeight;
}
function handleSend(){
  const t=chatInput.value.trim(); if(!t) return;
  addMsg(t,'user'); chatInput.value=''; setTimeout(()=>addMsg('Mình đã nhận được yêu cầu. Bạn muốn mình làm gì tiếp theo?'),500);
}
chatToggle.onclick=()=>chatbox.classList.toggle('open');
sendBtn.onclick=handleSend;
chatInput.onkeydown=e=>{ if(e.key==='Enter') handleSend(); };

render();
</script>
</body>
</html>
